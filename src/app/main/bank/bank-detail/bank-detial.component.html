<div class="p-6 space-y-4">
    <h2 class="text-2xl font-bold">Bank: {{ bank?.name }}</h2>
  
    <!-- File Upload Section -->
    <div class="border p-4 rounded-lg bg-gray-50">
      <label class="block mb-2 font-medium">Upload Statement:</label>
      <div class="flex items-center space-x-4">
        <input 
          type="file" 
          (change)="onFileSelected($event)" 
          class="border p-2 rounded flex-grow"
          accept=".csv, .xlsx, .xls" 
        />
        <button 
          (click)="upload()" 
          class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded"
          [disabled]="!selectedFile || uploadProgress !== null"
        >
          {{ uploadProgress ? 'Uploading...' : 'Upload' }}
        </button>
      </div>
      
      <!-- Upload progress and messages -->
      <div *ngIf="uploadProgress !== null" class="mt-2">
        <div class="w-full bg-gray-200 rounded-full h-2.5">
          <div 
            class="bg-blue-600 h-2.5 rounded-full" 
            [style.width.%]="uploadProgress"
          ></div>
        </div>
        <p class="text-sm mt-1">{{ uploadProgress }}% complete</p>
      </div>
      
      <!-- <p *ngIf="uploadMessage" class="mt-2 text-sm" 
         [class.text-green-600]="uploadMessage.includes('success')"
         [class.text-red-600]="uploadMessage.includes('Invalid')">
        {{ uploadMessage }}
      </p> -->
    </div>
  
    <!-- Transactions Table -->
    <div class="overflow-x-auto mt-6">
      <table class="w-full border">
        <thead>
          <tr class="bg-gray-100">
            <th class="p-3 border text-left">Date</th>
            <th class="p-3 border text-left">Amount</th>
            <th class="p-3 border text-left">Reference</th>
            <th class="p-3 border text-left">Status</th>
            <th class="p-3 border text-left">Action</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let txn of transactions" class="hover:bg-gray-50">
            <td class="p-3 border">{{ txn.date  }}</td>
            <td class="p-3 border">{{ txn.amount }}</td>
            <td class="p-3 border">{{ txn.reference }}</td>
            <td class="p-3 border">
              <span [class.text-green-600]="txn.matched" [class.text-red-600]="!txn.matched">
                {{ txn.matched ? 'âœ“ Reconciled' : 'Unmatched' }}
              </span>
            </td>
            <td class="p-3 border">
              <button 
                *ngIf="!txn.matched" 
                (click)="openReconcileModal(txn)" 
                class="text-sm bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded"
              >
                Reconcile
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  
  <!-- Reconcile Modal -->
  <div *ngIf="showModal" class="fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50">
    <div class="bg-white p-6 rounded-lg shadow-lg w-full max-w-md">
      <h3 class="text-lg font-semibold mb-4">Reconcile Transaction</h3>
      
      <div class="mb-4">
        <!-- <p><strong>Date:</strong> {{ selectedTransaction?.date | date:'mediumDate' }}</p> -->
        <!-- <p><strong>Amount:</strong> {{ selectedTransaction?.amount | currency }}</p> -->
        <p><strong>Reference:</strong> {{ selectedTransaction?.reference }}</p>
      </div>
      
      <!-- <div class="mb-4">
        <label class="block mb-2 font-medium">Customer ID</label>
        <input 
          [(ngModel)]="customerId" 
          class="border p-2 w-full rounded"
          placeholder="Enter customer ID"
        />
      </div> -->
      
      <div class="flex justify-end space-x-2">
        <button 
          (click)="showModal = false" 
          class="px-4 py-2 border rounded hover:bg-gray-100"
        >
          Cancel
        </button>
        <button 
          (click)="reconcile()" 
          class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded"
          [disabled]="!customerId"
        >
          Confirm
        </button>
      </div>
    </div>
  </div>