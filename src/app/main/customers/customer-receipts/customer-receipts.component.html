<!-- customer-receipts.component.html -->
<div class="max-w-7xl mx-auto p-4 sm:p-6 lg:p-8">
  <!-- Header Section -->
  <div class="mb-8">
    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between">
     
      </div>
      <div class="mt-4 sm:mt-0">
        <button 
          (click)="retry()" 
          [disabled]="loading"
          class="inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200">
          <i class="ri-refresh-line mr-2" [class.animate-spin]="loading"></i>
          {{ loading ? 'Loading...' : 'Refresh' }}
        </button>
      </div>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="flex flex-col items-center justify-center py-16 bg-gradient-to-br from-blue-50 to-indigo-100 rounded-xl">
    <div class="relative">
      <div class="animate-spin rounded-full h-16 w-16 border-4 border-blue-200 border-t-blue-600"></div>
      <div class="absolute inset-0 rounded-full bg-gradient-to-r from-blue-400 to-purple-500 opacity-20 animate-pulse"></div>
    </div>
    <h3 class="mt-6 text-lg font-semibold text-gray-900">Loading receipts...</h3>
    <p class="mt-2 text-gray-600">Please wait while we fetch the latest data</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error && !loading" class="bg-gradient-to-r from-red-50 to-pink-50 border border-red-200 rounded-xl p-6 mb-8 shadow-sm">
    <div class="flex items-start">
      <div class="flex-shrink-0">
        <div class="w-10 h-10 rounded-full bg-red-100 flex items-center justify-center">
          <i class="ri-error-warning-line text-red-600 text-xl"></i>
        </div>
      </div>
      <div class="ml-4 flex-1">
        <h3 class="text-lg font-semibold text-red-900">Unable to Load Receipts</h3>
        <p class="mt-2 text-red-700">{{ error }}</p>
        <div class="mt-4">
          <button 
            (click)="retry()" 
            class="inline-flex items-center px-4 py-2 bg-red-600 text-white text-sm font-medium rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition-all duration-200 transform hover:scale-105">
            <i class="ri-refresh-line mr-2"></i>
            Try Again
          </button>
        </div>
      </div>
    </div>

    <!-- No filtered results -->
    <div *ngIf="getFilteredReceipts().length === 0" class="text-center py-12 px-6">
      <div class="w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center">
        <i class="ri-filter-line text-2xl text-gray-400"></i>
      </div>
      <h3 class="text-lg font-semibold text-gray-700 mb-2">
        No receipts found
        <span *ngIf="statusFilter !== 'all'"> with status "{{ statusFilter }}"</span>
        <span *ngIf="searchTerm.trim()"> matching "{{ searchTerm }}"</span>
      </h3>
      <p class="text-gray-500 mb-4">Try adjusting your filters or search terms to see more receipts.</p>
      <button 
        (click)="statusFilter = 'all'; searchTerm = ''" 
        class="inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200">
        <i class="ri-refresh-line mr-2"></i>
        Clear All Filters
      </button>
    </div>
  </div>

  <!-- Empty State -->
  <div *ngIf="!loading && !error && receipts.length === 0" class="text-center py-16 bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl">
    <div class="w-24 h-24 mx-auto mb-6 bg-gradient-to-br from-gray-200 to-gray-300 rounded-full flex items-center justify-center">
      <i class="ri-receipt-line text-4xl text-gray-500"></i>
    </div>
    <h3 class="text-xl font-semibold text-gray-900 mb-2">No Receipts Found</h3>

    <button 
      (click)="retry()" 
      class="inline-flex items-center px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200 transform hover:scale-105">
      <i class="ri-refresh-line mr-2"></i>
      Refresh Data
    </button>
  </div>

  <!-- Receipts Table/Grid -->
  <div *ngIf="!loading && !error && receipts.length > 0" class="bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden">
    <!-- Stats Header with Filters -->
    <div class="bg-gradient-to-r from-blue-50 to-indigo-50 px-6 py-5 border-b border-gray-200">
      <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4">
        <div>
          <h3 class="text-lg font-semibold text-gray-900">Receipt History</h3>
          <p class="mt-1 text-sm text-gray-600">{{ receipts.length }} total receipt(s) found</p>
        </div>
        <!-- Search Input -->
        <div class="mt-3 sm:mt-0">
          <div class="relative">
            <input
              type="text"
              [(ngModel)]="searchTerm"
              placeholder="Search by customer name or phone..."
              class="w-full sm:w-64 pl-10 pr-4 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
            <i class="ri-search-line absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
          </div>
        </div>
      </div>

      <!-- Filter Tabs -->
      <div class="flex flex-wrap gap-2">
        <button
          (click)="setStatusFilter('all')"
          [class]="'px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ' + 
                  (statusFilter === 'all' ? 'bg-blue-600 text-white shadow-md' : 'bg-white text-gray-700 hover:bg-gray-50 border border-gray-200')">
          All ({{ getFilterCount('all') }})
        </button>
        <button
          (click)="setStatusFilter('pending')"
          [class]="'px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ' + 
                  (statusFilter === 'pending' ? 'bg-yellow-500 text-white shadow-md' : 'bg-white text-gray-700 hover:bg-gray-50 border border-gray-200')">
          <div class="inline-flex items-center">
            <div class="w-2 h-2 bg-yellow-500 rounded-full mr-2"></div>
            Pending ({{ getFilterCount('pending') }})
          </div>
        </button>
        <button
          (click)="setStatusFilter('approved')"
          [class]="'px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ' + 
                  (statusFilter === 'approved' ? 'bg-green-600 text-white shadow-md' : 'bg-white text-gray-700 hover:bg-gray-50 border border-gray-200')">
          <div class="inline-flex items-center">
            <div class="w-2 h-2 bg-green-500 rounded-full mr-2"></div>
            Approved ({{ getFilterCount('approved') }})
          </div>
        </button>
        <button
          (click)="setStatusFilter('rejected')"
          [class]="'px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ' + 
                  (statusFilter === 'rejected' ? 'bg-red-600 text-white shadow-md' : 'bg-white text-gray-700 hover:bg-gray-50 border border-gray-200')">
          <div class="inline-flex items-center">
            <div class="w-2 h-2 bg-red-500 rounded-full mr-2"></div>
            Rejected ({{ getFilterCount('rejected') }})
          </div>
        </button>
      </div>
    </div>

    <!-- Show filtered results count -->
    <div *ngIf="statusFilter !== 'all' || searchTerm.trim()" class="px-6 py-3 bg-gray-50 border-b border-gray-200">
      <p class="text-sm text-gray-600">
        Showing {{ getFilteredReceipts().length }} of {{ receipts.length }} receipts
        <span *ngIf="statusFilter !== 'all'"> with status "{{ statusFilter }}"</span>
        <span *ngIf="searchTerm.trim()"> matching "{{ searchTerm }}"</span>
        <button 
          (click)="statusFilter = 'all'; searchTerm = ''" 
          class="ml-2 text-blue-600 hover:text-blue-800 underline">
          Clear filters
        </button>
      </p>
    </div>

    <!-- Desktop Table View -->
    <div *ngIf="getFilteredReceipts().length > 0" class="hidden lg:block overflow-x-auto">
      <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-50">
          <tr>
            <th class="px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">Customer</th>
            <th class="px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">Preview</th>
            <th class="px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">Status</th>
            <th class="px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">Submitted</th>
            <th class="px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">Actions</th>
          </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200">
          <tr *ngFor="let receipt of getFilteredReceipts(); let i = index" class="hover:bg-gray-50 transition-all duration-200 hover:shadow-sm">
            <td class="px-6 py-4 whitespace-nowrap">
              <div *ngIf="hasCustomerInfo(receipt)" class="flex items-center">
                <div class="flex-shrink-0 w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center">
                  <i class="ri-user-line text-white"></i>
                </div>
                <div class="ml-3">
                  <div class="text-sm font-semibold text-gray-900">{{ getCustomerName(receipt) }}</div>
                  <div class="text-sm text-gray-500">{{ getCustomerPhone(receipt) }}</div>
                </div>
              </div>
              <div *ngIf="!hasCustomerInfo(receipt)" class="flex items-center">
                <div class="flex-shrink-0 w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center">
                  <i class="ri-user-line text-gray-500"></i>
                </div>
                <div class="ml-3">
                  <div class="text-sm font-medium text-gray-500">Anonymous</div>
                  <div class="text-xs text-gray-400">No customer info</div>
                </div>
              </div>
            </td>
            <td class="px-6 py-4 whitespace-nowrap">
              <button
                (click)="openPreview(receipt)"
                class="inline-flex items-center px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg hover:from-blue-600 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1 transition-all duration-200 transform hover:scale-105 shadow-sm">
                <i class="ri-eye-line mr-2"></i>
                <span class="font-medium">Preview</span>
              </button>
            </td>
            <td class="px-6 py-4 whitespace-nowrap">
              <span [class]="'inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold border ' + getStatusColor(receipt.status)">
                <div class="w-2 h-2 rounded-full bg-current mr-2 opacity-75"></div>
                {{ receipt.status | titlecase }}
              </span>
            </td>
            <td class="px-6 py-4 whitespace-nowrap">
              <div class="text-sm text-gray-900 font-medium">{{ formatDate(receipt.sentAt) }}</div>
            </td>
            <td class="px-6 py-4 whitespace-nowrap">
              <div class="flex items-center space-x-2">
                <button
                  *ngIf="receipt.status !== 'approved'"
                  (click)="changeStatus(receipt._id, 'approved', receipt)"
                  [disabled]="updatingStatus"
                  class="inline-flex items-center px-3 py-1.5 bg-green-600 text-white text-xs font-medium rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-1 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-105">
                  <i class="ri-check-line mr-1"></i>
                  Approve
                </button>
                <button
                  *ngIf="receipt.status !== 'pending'"
                  (click)="changeStatus(receipt._id, 'pending', receipt)"
                  [disabled]="updatingStatus"
                  class="inline-flex items-center px-3 py-1.5 bg-yellow-500 text-white text-xs font-medium rounded-lg hover:bg-yellow-600 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-1 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-105">
                  <i class="ri-time-line mr-1"></i>
                  Pending
                </button>
                <button
                  *ngIf="receipt.status !== 'rejected'"
                  (click)="changeStatus(receipt._id, 'rejected', receipt)"
                  [disabled]="updatingStatus"
                  class="inline-flex items-center px-3 py-1.5 bg-red-600 text-white text-xs font-medium rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-1 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-105">
                  <i class="ri-close-line mr-1"></i>
                  Reject
                </button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Mobile/Tablet Card View -->
    <div *ngIf="getFilteredReceipts().length > 0" class="lg:hidden">
      <div class="grid gap-4 p-6 sm:grid-cols-2">
        <div *ngFor="let receipt of getFilteredReceipts(); let i = index" class="bg-white border border-gray-200 rounded-xl p-5 hover:shadow-md transition-all duration-200 hover:border-gray-300">
          <!-- Customer Info -->
          <div class="flex items-center mb-4 pb-3 border-b border-gray-100">
            <div *ngIf="hasCustomerInfo(receipt)" class="flex items-center">
              <div class="flex-shrink-0 w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center">
                <i class="ri-user-line text-white"></i>
              </div>
              <div class="ml-3">
                <div class="text-sm font-semibold text-gray-900">{{ getCustomerName(receipt) }}</div>
                <div class="text-xs text-gray-500">{{ getCustomerPhone(receipt) }}</div>
              </div>
            </div>
            <div *ngIf="!hasCustomerInfo(receipt)" class="flex items-center">
              <div class="flex-shrink-0 w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center">
                <i class="ri-user-line text-gray-500"></i>
              </div>
              <div class="ml-3">
                <div class="text-sm font-medium text-gray-500">Anonymous</div>
                <div class="text-xs text-gray-400">No customer info</div>
              </div>
            </div>
          </div>

          <!-- Status and Date -->
          <div class="flex items-center justify-between mb-4">
            <span [class]="'inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold border ' + getStatusColor(receipt.status)">
              <div class="w-2 h-2 rounded-full bg-current mr-2 opacity-75"></div>
              {{ receipt.status | titlecase }}
            </span>
            <span class="text-xs text-gray-500 font-medium">{{ formatDate(receipt.sentAt) }}</span>
          </div>
          
          <!-- Preview Button -->
          <div class="mb-4">
            <button
              (click)="openPreview(receipt)"
              class="inline-flex items-center w-full justify-center px-4 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg hover:from-blue-600 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1 transition-all duration-200 transform hover:scale-105 shadow-sm">
              <i class="ri-eye-line mr-2 text-lg"></i>
              <span class="font-medium">Preview Receipt</span>
            </button>
          </div>

          <!-- Action Buttons -->
          <div class="grid grid-cols-2 gap-2">
            <button
              *ngIf="receipt.status !== 'approved'"
              (click)="changeStatus(receipt._id, 'approved', receipt)"
              [disabled]="updatingStatus"
              class="inline-flex justify-center items-center px-3 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-1 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-105">
              <i class="ri-check-line mr-1"></i>
              Approve
            </button>
            <button
              *ngIf="receipt.status !== 'pending'"
              (click)="changeStatus(receipt._id, 'pending', receipt)"
              [disabled]="updatingStatus"
              class="inline-flex justify-center items-center px-3 py-2 bg-yellow-500 text-white text-sm font-medium rounded-lg hover:bg-yellow-600 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-1 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-105">
              <i class="ri-time-line mr-1"></i>
              Pending
            </button>
            <button
              *ngIf="receipt.status !== 'rejected'"
              (click)="changeStatus(receipt._id, 'rejected', receipt)"
              [disabled]="updatingStatus"
              class="inline-flex justify-center items-center px-3 py-2 bg-red-600 text-white text-sm font-medium rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-1 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-105 col-span-2">
              <i class="ri-close-line mr-1"></i>
              Reject Receipt
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Status Update Loading Overlay -->
  <div *ngIf="updatingStatus" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-40 backdrop-blur-sm">
    <div class="bg-white rounded-xl p-8 shadow-2xl border border-gray-200 max-w-sm w-full mx-4">
      <div class="flex flex-col items-center">
        <div class="relative mb-4">
          <div class="animate-spin rounded-full h-12 w-12 border-4 border-blue-200 border-t-blue-600"></div>
          <div class="absolute inset-0 rounded-full bg-gradient-to-r from-blue-400 to-purple-500 opacity-20 animate-pulse"></div>
        </div>
        <h3 class="text-lg font-semibold text-gray-900 mb-2">Updating Status</h3>
        <p class="text-gray-600 text-center">Please wait while we process your request...</p>
      </div>
    </div>
  </div>


<!-- Enhanced Preview Modal -->
<div 
  *ngIf="selectedReceipt"
  class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4 backdrop-blur-sm"
  (click)="closePreview()"
>
  <div class="bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden" (click)="$event.stopPropagation()">
    <!-- Modal Header -->
    <div class="bg-gradient-to-r from-blue-50 to-indigo-50 px-6 py-4 border-b border-gray-200 flex items-center justify-between">
      <div class="flex-1">
        <div class="flex items-center mb-2">
          <h3 class="text-xl font-bold text-gray-900 mr-3">Receipt Preview</h3>
          <span [class]="'inline-flex items-center px-2 py-1 rounded-full text-xs font-semibold border ' + getStatusColor(selectedReceipt.status)">
            {{ selectedReceipt.status | titlecase }}
          </span>
        </div>
        
        <!-- Customer Info -->
        <div *ngIf="hasCustomerInfo(selectedReceipt)" class="flex items-center mb-2">
          <div class="w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center mr-2">
            <i class="ri-user-line text-white text-sm"></i>
          </div>
          <span class="text-sm font-medium text-gray-900 mr-3">{{ getCustomerName(selectedReceipt) }}</span>
          <span class="text-sm text-gray-600">{{ getCustomerPhone(selectedReceipt) }}</span>
        </div>
        <div *ngIf="!hasCustomerInfo(selectedReceipt)" class="flex items-center mb-2">
          <div class="w-6 h-6 bg-gray-400 rounded-full flex items-center justify-center mr-2">
            <i class="ri-user-line text-white text-sm"></i>
          </div>
          <span class="text-sm text-gray-500">Anonymous submission</span>
        </div>
        
        <p class="text-xs text-gray-500">Submitted: {{ formatDate(selectedReceipt.sentAt) }}</p>
      </div>
      <button 
        (click)="closePreview()" 
        class="p-2 hover:bg-gray-100 rounded-full transition-colors duration-200">
        <i class="ri-close-line text-2xl text-gray-500"></i>
      </button>
    </div>

    <!-- Modal Content -->
    <div class="p-6 overflow-y-auto max-h-[calc(90vh-200px)]">
      <div class="flex justify-center">
        <!-- PDF Preview -->
        <div *ngIf="isPdf(selectedReceipt.imageUrl)" class="w-full">
          <div class="bg-gray-100 rounded-lg p-4 mb-4">
            <div class="flex items-center text-gray-600 mb-2">
              <i class="ri-file-pdf-line text-red-500 text-xl mr-2"></i>
              <span class="font-medium">PDF Document</span>
            </div>
            <iframe 
              [src]="selectedReceipt.imageUrl" 
              class="w-full h-96 border border-gray-300 rounded-lg"
              frameborder="0">
            </iframe>
          </div>
          <div class="text-center">
            <a 
              [href]="selectedReceipt.imageUrl" 
              target="_blank" 
              rel="noopener noreferrer"
              class="inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200">
              <i class="ri-external-link-line mr-2"></i>
              Open in New Tab
            </a>
          </div>
        </div>

        <!-- Image Preview -->
        <div *ngIf="!isPdf(selectedReceipt.imageUrl)" class="w-full">
          <div *ngIf="!imageLoadError" class="relative">
            <img 
              [src]="selectedReceipt.imageUrl" 
              alt="Receipt Image" 
              (error)="onImageError()"
              class="w-full max-h-[60vh] object-contain rounded-lg shadow-sm border border-gray-200" />
          </div>
          
          <!-- Image Error State -->
          <div *ngIf="imageLoadError" class="text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300">
            <div class="w-16 h-16 mx-auto mb-4 bg-gray-200 rounded-full flex items-center justify-center">
              <i class="ri-image-line text-2xl text-gray-400"></i>
            </div>
            <h4 class="text-lg font-semibold text-gray-700 mb-2">Failed to Load Image</h4>
            <p class="text-gray-500 mb-4">The receipt image could not be displayed.</p>
            <a 
              [href]="selectedReceipt.imageUrl" 
              target="_blank" 
              rel="noopener noreferrer"
              class="inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200">
              <i class="ri-external-link-line mr-2"></i>
              Open Direct Link
            </a>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal Footer -->
    <div class="bg-gray-50 px-6 py-4 border-t border-gray-200 flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-3 sm:space-y-0">
      <div class="flex items-center space-x-4">
        <button 
          *ngIf="selectedReceipt.status !== 'approved'"
          (click)="changeStatus(selectedReceipt._id, 'approved', selectedReceipt); closePreview()"
          [disabled]="updatingStatus"
          class="inline-flex items-center px-4 py-2 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-1 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-105">
          <i class="ri-check-line mr-2"></i>
          Approve Receipt
        </button>
        
        <button 
          *ngIf="selectedReceipt.status !== 'pending'"
          (click)="changeStatus(selectedReceipt._id, 'pending', selectedReceipt); closePreview()"
          [disabled]="updatingStatus"
          class="inline-flex items-center px-4 py-2 bg-yellow-500 text-white font-medium rounded-lg hover:bg-yellow-600 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-1 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-105">
          <i class="ri-time-line mr-2"></i>
          Set Pending
        </button>

        <button 
          *ngIf="selectedReceipt.status !== 'rejected'"
          (click)="changeStatus(selectedReceipt._id, 'rejected', selectedReceipt); closePreview()"
          [disabled]="updatingStatus"
          class="inline-flex items-center px-4 py-2 bg-red-600 text-white font-medium rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-1 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-105">
          <i class="ri-close-line mr-2"></i>
          Reject
        </button>
      </div>

      <button 
        (click)="closePreview()" 
        class="inline-flex items-center px-4 py-2 border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1 transition-all duration-200">
        <i class="ri-close-line mr-2"></i>
        Close Preview
      </button>
    </div>
  </div>
</div>